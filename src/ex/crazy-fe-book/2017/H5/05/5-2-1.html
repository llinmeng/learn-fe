<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTMLAudioElement 与 HTMLVideoElement - 音乐播放器</title>
</head>
<body>
    <h2>音乐播放器</h2>
    <select id="typeSel" style="width: 160px">
        <option value="sequence">顺序播放</option>
        <option value="random">随机播放</option>
    </select><br/>

    <audio id="player" controls>
        您的浏览器不支持 audio 元素
    </audio>

    <script type="text/javascript">
        var musics = ["demo.ogg", "Roses-and-Gold.mp3", "demo.ogg", "houlai.mp3"];
        var index = 0;
        var playType;
        window.onload = function () {
            var typeSel = document.getElementById("typeSel");
            typeSel.onchange = function () {
                window.playType = typeSel.value;
            }
            var player = document.getElementById("player");
            player.src = musics[index];
            player.onended = function () {
                if(playType == "random") {
                    index = Math.floor(Math.random() * musics.length);
                    player.src = musics[index];
                } else {
                    player.src = musics[++index % musics.length];
                }
                player.play();
            }
        }
    </script>
</body>
</html>


